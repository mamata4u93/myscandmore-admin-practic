{"ast":null,"code":"var _jsxFileName = \"/Users/sunita/Sites/Erptech/myscandmore-admin-practic/src/pages/common/StandardTable/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Table, Alert } from 'antd';\nimport styles from './index.less';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction initTotalList(columns) {\n  const totalList = [];\n  columns.forEach(column => {\n    if (column.needTotal) {\n      totalList.push({ ...column,\n        total: 0\n      });\n    }\n  });\n  return totalList;\n}\n\nconst StandardTable = props => {\n  _s();\n\n  const {\n    columns,\n    onSelectRow,\n    onChange\n  } = props;\n  const {\n    selectedRows,\n    data = {},\n    pageOnChange,\n    rowKey,\n    ...rest\n  } = props;\n  const {\n    list = [],\n    pagination,\n    count\n  } = data;\n  const [selectedRowKeys, setSelectedRowKeys] = useState([]);\n  const [needTotalList, setNeedTotalList] = useState(initTotalList(columns));\n  const [current, setCurrent] = useState(1);\n\n  const handleRowSelectChange = (selectedRowKeys, selectedRows) => {\n    let newNeedTotalList = needTotalList.map(item => ({ ...item,\n      total: selectedRows.reduce((sum, val) => sum + parseFloat(val[item.dataIndex], 10), 0)\n    }));\n\n    if (onSelectRow) {\n      onSelectRow(selectedRows);\n    }\n\n    setSelectedRowKeys(selectedRowKeys);\n    setNeedTotalList(newNeedTotalList);\n  };\n\n  const handleTableChange = (pagination, filters, sorter) => {\n    if (onChange) {\n      onChange(pagination, filters, sorter);\n    }\n  };\n\n  const cleanSelectedKeys = () => {\n    handleRowSelectChange([], []);\n  };\n\n  const paginationProps = {\n    showSizeChanger: false,\n    showQuickJumper: true,\n    current,\n    onChange: (page, pageSize) => {\n      pageOnChange(page, pageSize);\n      setCurrent(page);\n    },\n    ...pagination,\n    total: count\n  };\n  const rowSelection = {\n    selectedRowKeys,\n    onChange: handleRowSelectChange,\n    getCheckboxProps: record => ({\n      disabled: record.disabled\n    })\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.standardTable,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.tableAlert,\n      children: selectedRows && /*#__PURE__*/_jsxDEV(Alert, {\n        message: /*#__PURE__*/_jsxDEV(Fragment, {\n          children: [\"Choose \", /*#__PURE__*/_jsxDEV(\"a\", {\n            style: {\n              fontWeight: 600\n            },\n            children: selectedRowKeys.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 22\n          }, this), \" Item\\xA0\\xA0\", needTotalList.map(item => /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              marginLeft: 8\n            },\n            children: [item.title, \"\\xA0\", /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontWeight: 600\n              },\n              children: item.render ? item.render(item.total) : item.total\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 19\n            }, this)]\n          }, item.dataIndex, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 17\n          }, this)), /*#__PURE__*/_jsxDEV(\"a\", {\n            onClick: cleanSelectedKeys,\n            style: {\n              marginLeft: 24\n            },\n            children: \"Empty\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this),\n        type: \"info\",\n        showIcon: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 27\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      rowKey: rowKey || 'key',\n      locale: {\n        emptyText: 'No results found'\n      },\n      rowSelection: selectedRows === false ? false : rowSelection,\n      dataSource: list,\n      pagination: paginationProps,\n      onChange: handleTableChange,\n      ...rest\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n\n_s(StandardTable, \"wiRdVBXeKhnaofJN4UltYfSC9S0=\");\n\n_c = StandardTable;\nStandardTable.defaultProps = {\n  columns: [],\n  data: {}\n};\nStandardTable.propTypes = {\n  onSelectRow: PropTypes.func,\n  onChange: PropTypes.node,\n  selectedRows: PropTypes.node,\n  pageOnChange: PropTypes.func,\n  columns: PropTypes.array,\n  data: PropTypes.object,\n  rowKey: PropTypes.node,\n  maxHeight: PropTypes.number,\n  className: PropTypes.string,\n  size: PropTypes.number\n};\nexport default StandardTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"StandardTable\");","map":{"version":3,"names":["React","Fragment","useState","PropTypes","Table","Alert","styles","initTotalList","columns","totalList","forEach","column","needTotal","push","total","StandardTable","props","onSelectRow","onChange","selectedRows","data","pageOnChange","rowKey","rest","list","pagination","count","selectedRowKeys","setSelectedRowKeys","needTotalList","setNeedTotalList","current","setCurrent","handleRowSelectChange","newNeedTotalList","map","item","reduce","sum","val","parseFloat","dataIndex","handleTableChange","filters","sorter","cleanSelectedKeys","paginationProps","showSizeChanger","showQuickJumper","page","pageSize","rowSelection","getCheckboxProps","record","disabled","standardTable","tableAlert","fontWeight","length","marginLeft","title","render","emptyText","defaultProps","propTypes","func","node","array","object","maxHeight","number","className","string","size"],"sources":["/Users/sunita/Sites/Erptech/myscandmore-admin-practic/src/pages/common/StandardTable/index.js"],"sourcesContent":["import React, { Fragment, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Table, Alert } from 'antd';\nimport styles from './index.less';\n\nfunction initTotalList(columns) {\n  const totalList = [];\n  columns.forEach(column => {\n    if (column.needTotal) {\n      totalList.push({ ...column, total: 0 });\n    }\n  });\n  return totalList;\n}\n\nconst StandardTable = (props) => {\n  const { columns, onSelectRow, onChange } = props;\n  const { selectedRows, data = {}, pageOnChange, rowKey, ...rest } = props;\n  const { list = [], pagination, count } = data;\n\n  const [selectedRowKeys, setSelectedRowKeys] = useState([]);\n  const [needTotalList, setNeedTotalList] = useState(initTotalList(columns));\n  const [current, setCurrent] = useState(1);\n\n\n  const handleRowSelectChange = (selectedRowKeys, selectedRows) => {\n    let newNeedTotalList = needTotalList.map(item => ({\n      ...item,\n      total: selectedRows.reduce((sum, val) => sum + parseFloat(val[item.dataIndex], 10), 0),\n    }));\n    if (onSelectRow) {\n      onSelectRow(selectedRows);\n    }\n    setSelectedRowKeys(selectedRowKeys)\n    setNeedTotalList(newNeedTotalList)\n  };\n\n  const handleTableChange = (pagination, filters, sorter) => {\n    if (onChange) {\n      onChange(pagination, filters, sorter);\n    }\n  };\n\n  const cleanSelectedKeys = () => {\n    handleRowSelectChange([], []);\n  };\n\n  const paginationProps = {\n    showSizeChanger: false,\n    showQuickJumper: true,\n    current,\n    onChange: (page, pageSize) => {\n      pageOnChange(page, pageSize)\n      setCurrent(page)\n    },\n    ...pagination,\n    total: count,\n  };\n\n  const rowSelection = {\n    selectedRowKeys,\n    onChange: handleRowSelectChange,\n    getCheckboxProps: record => ({\n      disabled: record.disabled,\n    }),\n  };\n\n  return (\n    <div className={styles.standardTable}>\n      <div className={styles.tableAlert}>\n        {selectedRows && (<Alert\n          message={\n            <Fragment>\n              Choose <a style={{ fontWeight: 600 }}>{selectedRowKeys.length}</a> Item&nbsp;&nbsp;\n              {needTotalList.map(item => (\n                <span style={{ marginLeft: 8 }} key={item.dataIndex}>\n                  {item.title}\n                  &nbsp;\n                  <span style={{ fontWeight: 600 }}>\n                    {item.render ? item.render(item.total) : item.total}\n                  </span>\n                </span>\n              ))}\n              <a onClick={cleanSelectedKeys} style={{ marginLeft: 24 }}>\n                Empty\n              </a>\n            </Fragment>\n          }\n          type=\"info\"\n          showIcon\n        />)}\n      </div>\n      <Table\n        rowKey={rowKey || 'key'}\n        locale={{ emptyText: 'No results found' }}\n        rowSelection={selectedRows === false ? false : rowSelection}\n        dataSource={list}\n        pagination={paginationProps}\n        onChange={handleTableChange}\n        {...rest}\n      />\n    </div>\n  );\n}\n\nStandardTable.defaultProps = {\n  columns: [],\n  data: {},\n};\n\nStandardTable.propTypes = {\n  onSelectRow: PropTypes.func,\n  onChange: PropTypes.node,\n  selectedRows: PropTypes.node,\n  pageOnChange: PropTypes.func,\n  columns: PropTypes.array,\n  data: PropTypes.object,\n  rowKey: PropTypes.node,\n  maxHeight: PropTypes.number,\n  className: PropTypes.string,\n  size: PropTypes.number,\n};\n\nexport default StandardTable;"],"mappings":"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"},"metadata":{},"sourceType":"module"}