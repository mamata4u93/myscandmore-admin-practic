{"ast":null,"code":"var _jsxFileName = \"/Users/sunita/Sites/Erptech/myscandmore-admin-practic/src/pages/videos/uploadVideoSection.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef } from \"react\";\nimport PropTypes from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const UploadVideoSection = props => {\n  _s();\n\n  const {\n    x,\n    y,\n    url,\n    video,\n    paused,\n    notify,\n    setVideo,\n    seekTime,\n    setPaused,\n    resetSeekTime,\n    displayCoordinates,\n    handleSetCoordinates,\n    setVideoPlayBackTime\n  } = props;\n  const ref = useRef(null);\n\n  const handleVideoUpload = e => {\n    var _e$target, _e$target$files$, _e$target2;\n\n    if (e !== null && e !== void 0 && (_e$target = e.target) !== null && _e$target !== void 0 && (_e$target$files$ = _e$target.files[0]) !== null && _e$target$files$ !== void 0 && _e$target$files$.name) setVideo(e === null || e === void 0 ? void 0 : (_e$target2 = e.target) === null || _e$target2 === void 0 ? void 0 : _e$target2.files[0]);\n  };\n\n  const showCurrentTime = _ref => {\n    let {\n      current: videoDom\n    } = _ref;\n    setVideoPlayBackTime(videoDom === null || videoDom === void 0 ? void 0 : videoDom.currentTime);\n  };\n\n  useEffect(() => {\n    if (ref.current) {\n      ref.current.onloadedmetadata = () => {\n        var _ref$current, _ref$current2;\n\n        if ((ref === null || ref === void 0 ? void 0 : (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.videoWidth) > (ref === null || ref === void 0 ? void 0 : (_ref$current2 = ref.current) === null || _ref$current2 === void 0 ? void 0 : _ref$current2.videoHeight)) {\n          setVideo(\"\");\n          notify({\n            notification: \"Please use Portrait videos\",\n            type: \"error\"\n          });\n          return;\n        }\n      };\n    }\n  }, [ref.current]);\n  useEffect(() => {\n    var _ref$current3;\n\n    ref === null || ref === void 0 ? void 0 : (_ref$current3 = ref.current) === null || _ref$current3 === void 0 ? void 0 : _ref$current3.addEventListener(\"timeupdate\", () => {\n      showCurrentTime(ref);\n    });\n  }, [ref === null || ref === void 0 ? void 0 : ref.current]);\n  useEffect(() => {\n    if (ref.current && seekTime !== -1) {\n      setPaused(true);\n      ref.current.pause();\n      ref.current.currentTime = seekTime;\n      resetSeekTime(-1);\n    }\n  }, [seekTime]);\n  useEffect(() => {\n    if (paused) console.log(\"the video has been paused\");\n  }, [paused]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video_player_container\",\n      onClick: e => {\n        var rect = e.target.getBoundingClientRect();\n        handleSetCoordinates({\n          y: e.clientY - rect.top - 15,\n          x: e.clientX - rect.left - 15\n        });\n      },\n      children: [(x !== \"\" || displayCoordinates.x !== \"\") && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          top: displayCoordinates.y || y,\n          left: displayCoordinates.x || x,\n          position: \"absolute\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            width: \"2rem\",\n            height: \"2rem\",\n            borderRadius: \"50rem\",\n            backgroundColor: \"red\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), (video === null || video === void 0 ? void 0 : video.name) && /*#__PURE__*/_jsxDEV(\"video\", {\n        controls: true,\n        ref: ref,\n        id: \"video\",\n        muted: true,\n        width: \"100%\",\n        height: \"100%\",\n        paused: paused,\n        className: \"video_player\",\n        onPlay: () => setPaused(false),\n        onPause: () => setPaused(true),\n        children: /*#__PURE__*/_jsxDEV(\"source\", {\n          src: url\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      hidden: true,\n      type: \"file\",\n      id: \"video_input\",\n      onChange: e => handleVideoUpload(e),\n      accept: \"video/mp4,video/x-m4v,video/*\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"video_input\",\n      className: \"upload_video_label\",\n      children: \"Upload Video\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(UploadVideoSection, \"uRFQU35HJwVm4rDZwiLKuPVZ1UQ=\");\n\n_c = UploadVideoSection;\nUploadVideoSection.propTypes = {\n  x: PropTypes.any,\n  y: PropTypes.any,\n  url: PropTypes.any,\n  video: PropTypes.any,\n  paused: PropTypes.any,\n  notify: PropTypes.any,\n  setVideo: PropTypes.any,\n  seekTime: PropTypes.any,\n  setPaused: PropTypes.any,\n  resetSeekTime: PropTypes.any,\n  displayCoordinates: PropTypes.any,\n  handleSetCoordinates: PropTypes.any,\n  setVideoPlayBackTime: PropTypes.any\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"UploadVideoSection\");","map":{"version":3,"names":["React","useEffect","useRef","PropTypes","UploadVideoSection","props","x","y","url","video","paused","notify","setVideo","seekTime","setPaused","resetSeekTime","displayCoordinates","handleSetCoordinates","setVideoPlayBackTime","ref","handleVideoUpload","e","target","files","name","showCurrentTime","current","videoDom","currentTime","onloadedmetadata","videoWidth","videoHeight","notification","type","addEventListener","pause","console","log","rect","getBoundingClientRect","clientY","top","clientX","left","position","width","height","borderRadius","backgroundColor","propTypes","any"],"sources":["/Users/sunita/Sites/Erptech/myscandmore-admin-practic/src/pages/videos/uploadVideoSection.js"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport PropTypes from 'prop-types';\nexport const UploadVideoSection = (props) => {\n  const {\n    x,\n    y,\n    url,\n    video,\n    paused,\n    notify,\n    setVideo,\n    seekTime,\n    setPaused,\n    resetSeekTime,\n    displayCoordinates,\n    handleSetCoordinates,\n    setVideoPlayBackTime,\n  } = props;\n\n  const ref = useRef(null);\n\n  const handleVideoUpload = (e) => {\n    if (e?.target?.files[0]?.name) setVideo(e?.target?.files[0]);\n  };\n\n  const showCurrentTime = ({ current: videoDom }) => {\n    setVideoPlayBackTime(videoDom?.currentTime);\n  };\n\n  useEffect(() => {\n    if (ref.current) {\n      ref.current.onloadedmetadata = () => {\n        if (ref?.current?.videoWidth > ref?.current?.videoHeight) {\n          setVideo(\"\");\n          notify({ notification: \"Please use Portrait videos\", type: \"error\" });\n          return;\n        }\n      };\n    }\n  }, [ref.current]);\n\n  useEffect(() => {\n    ref?.current?.addEventListener(\"timeupdate\", () => {\n      showCurrentTime(ref);\n    });\n  }, [ref?.current]);\n\n  useEffect(() => {\n    if (ref.current && seekTime !== -1) {\n      setPaused(true);\n      ref.current.pause();\n      ref.current.currentTime = seekTime;\n      resetSeekTime(-1);\n    }\n  }, [seekTime]);\n\n  useEffect(() => {\n    if (paused) console.log(\"the video has been paused\");\n  }, [paused]);\n\n  return (\n    <>\n      <div\n        className=\"video_player_container\"\n        onClick={(e) => {\n          var rect = e.target.getBoundingClientRect();\n          handleSetCoordinates({\n            y: e.clientY - rect.top - 15,\n            x: e.clientX - rect.left - 15,\n          });\n        }}\n      >\n        {(x !== \"\" || displayCoordinates.x !== \"\") && (\n          <div\n            style={{\n              top: displayCoordinates.y || y,\n              left: displayCoordinates.x || x,\n              position: \"absolute\",\n            }}\n          >\n            <p\n              style={{\n                width: \"2rem\",\n                height: \"2rem\",\n                borderRadius: \"50rem\",\n                backgroundColor: \"red\",\n              }}\n            ></p>\n          </div>\n        )}\n        {video?.name && (\n          <video\n            controls\n            ref={ref}\n            id=\"video\"\n            muted={true}\n            width=\"100%\"\n            height=\"100%\"\n            paused={paused}\n            className=\"video_player\"\n            onPlay={() => setPaused(false)}\n            onPause={() => setPaused(true)}\n          >\n            <source src={url} />\n          </video>\n        )}\n      </div>\n      <input\n        hidden\n        type=\"file\"\n        id=\"video_input\"\n        onChange={(e) => handleVideoUpload(e)}\n        accept=\"video/mp4,video/x-m4v,video/*\"\n      />\n      <label htmlFor=\"video_input\" className=\"upload_video_label\">\n        Upload Video\n      </label>\n    </>\n  );\n};\n\nUploadVideoSection.propTypes = {\n  x: PropTypes.any,\n  y: PropTypes.any,\n  url: PropTypes.any,\n  video: PropTypes.any,\n  paused: PropTypes.any,\n  notify: PropTypes.any,\n  setVideo: PropTypes.any,\n  seekTime: PropTypes.any,\n  setPaused: PropTypes.any,\n  resetSeekTime: PropTypes.any,\n  displayCoordinates: PropTypes.any,\n  handleSetCoordinates: PropTypes.any,\n  setVideoPlayBackTime: PropTypes.any,\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}